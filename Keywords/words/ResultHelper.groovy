package words

import com.kms.katalon.core.annotation.Keyword
import com.kms.katalon.core.model.FailureHandling
import com.kms.katalon.core.testobject.ConditionType
import com.kms.katalon.core.testobject.TestObject
import com.kms.katalon.core.util.KeywordUtil
import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI
import com.kms.katalon.core.configuration.RunConfiguration

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ResultHelper - í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê²€ì¦ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ (ìµœì¢… ì •ë¦¬ ë²„ì „)
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥:
 *    verify() - ëª¨ë“  ê²€ì¦ì„ í•˜ë‚˜ë¡œ í†µí•©í•œ ë©”ì„œë“œ
 *
 * ğŸ“Œ ì‚¬ìš© ì˜ˆì‹œ:
 *    // í…ìŠ¤íŠ¸ ê²€ì¦
 *    CustomKeywords.'words.ResultHelper.verify'("ë¡œê·¸ì¸ ì„±ê³µ")
 *
 *    // í…ìŠ¤íŠ¸ê°€ ì—†ì–´ì•¼ ì„±ê³µ (ë¯¸ ì¶œë ¥ í™•ì¸)
 *    CustomKeywords.'words.ResultHelper.verify'("ê¸°ë³¸ê°’ ë³€ê²½", false)
 *
 *    // ì¡°íšŒ ê±´ìˆ˜ ê²€ì¦
 *    CustomKeywords.'words.ResultHelper.verify'()
 *
 *    // ì´ˆê¸°í™” ê²€ì¦
 *    CustomKeywords.'words.ResultHelper.verify'([input1, input2], button)
 *
 *    // ë²„íŠ¼ í´ë¦­
 *    CustomKeywords.'words.ResultHelper.verify'(buttonObject)
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */
class ResultHelper {

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// â–ˆâ–ˆ  íŒì—… ìë™ ë‹«ê¸° ì„¤ì •
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/** íŒì—… ìë™ ë‹«ê¸° ëŒ€ê¸° ì‹œê°„ (ì´ˆ) */
	private static final int POPUP_AUTO_CLOSE_SECONDS = 1.5

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// â–ˆâ–ˆ  í†µí•© ê²€ì¦ ë©”ì„œë“œ
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 * ëª¨ë“  ê²€ì¦ì„ ì²˜ë¦¬í•˜ëŠ” í†µí•© ë©”ì„œë“œ
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 */
	@Keyword
	static def verify(Object param1 = null, Object param2 = null) {

		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		// ğŸ• ê²€ì¦ ì „ ëŒ€ê¸° (í˜ì´ì§€ ë¡œë”© ë° ë Œë”ë§ ì•ˆì •í™”)
		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		WebUI.delay(1)

		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		// 1ï¸âƒ£ ì´ˆê¸°í™” ê²€ì¦ (List + TestObject)
		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		if (param1 instanceof List && param2 instanceof TestObject) {
			List<TestObject> inputObjects = param1
			TestObject buttonObject = param2

			// ê° ì…ë ¥ í•„ë“œì— í…ŒìŠ¤íŠ¸ ê°’ ì…ë ¥
			inputObjects.eachWithIndex { obj, index ->
				WebUI.setText(obj, "test${index}")
			}

			// ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­
			WebUI.click(buttonObject)
			WebUI.delay(0.5)

			// ëª¨ë“  ì…ë ¥ í•„ë“œê°€ ë¹„ì›Œì¡ŒëŠ”ì§€ ê²€ì¦
			boolean allCleared = inputObjects.every {
				WebUI.getAttribute(it, 'value') in ['', null]
			}

			if (allCleared) {
				printBox(true, "ì´ˆê¸°í™” ì„±ê³µ: ëª¨ë“  ì…ë ¥ê°’ì´ ì œê±°ë¨", "ì´ˆê¸°í™”")
			} else {
				printBox(false, "ì´ˆê¸°í™” ì‹¤íŒ¨: ì¼ë¶€ ì…ë ¥ê°’ì´ ë‚¨ì•„ìˆìŒ", "ì´ˆê¸°í™”")
			}
			return
		}

		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		// 2ï¸âƒ£ ë²„íŠ¼ í´ë¦­ (TestObjectë§Œ ì „ë‹¬)
		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		if (param1 instanceof TestObject && param2 == null) {
			TestObject buttonObject = param1

			// ë²„íŠ¼ì´ í´ë¦­ ê°€ëŠ¥í•œì§€ í™•ì¸ í›„ í´ë¦­
			if (WebUI.verifyElementClickable(buttonObject, FailureHandling.OPTIONAL)) {
				WebUI.click(buttonObject)
				printBox(true, "ë²„íŠ¼ í´ë¦­ ì„±ê³µ", "ë²„íŠ¼ í´ë¦­")
			} else {
				printBox(false, "ë²„íŠ¼ í´ë¦­ ì‹¤íŒ¨: ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ í´ë¦­í•  ìˆ˜ ì—†ìŒ", "ë²„íŠ¼ í´ë¦­")
			}
			return
		}

		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		// 3ï¸âƒ£ ì¡°íšŒ ê±´ìˆ˜ ê²€ì¦ (íŒŒë¼ë¯¸í„° ì—†ìŒ)
		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		if (param1 == null && param2 == null) {
			// "ì´ Nê±´" í˜•íƒœì˜ í…ìŠ¤íŠ¸ë¥¼ ì°¾ëŠ” XPath ìƒì„±
			TestObject totalCountObject = new TestObject().addProperty(
					"xpath",
					ConditionType.EQUALS,
					"//*[contains(text(),'ì´') and contains(text(),'ê±´')]"
					)

			// í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ìˆ«ìë§Œ íŒŒì‹±
			String totalText = WebUI.getText(totalCountObject, FailureHandling.OPTIONAL) ?: "ì´ 0ê±´"
			int count = Integer.parseInt(totalText.replaceAll("[^0-9]", "") ?: "0")

			// 0ê±´ ì´ìƒì´ë©´ ì„±ê³µ (0ê±´ë„ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬)
			if (count >= 0) {
				printBox(true, "ì´ " + count + "ê±´ ì¡°íšŒ ì„±ê³µ", "ì¡°íšŒ")
			} else {
				printBox(false, "ì¡°íšŒ ì‹¤íŒ¨: ê±´ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŒ", "ì¡°íšŒ")
			}
			return
		}

		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		// 4ï¸âƒ£ í…ìŠ¤íŠ¸ ê²€ì¦ (String + boolean ë˜ëŠ” Stringë§Œ)
		// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
		if (param1 instanceof String) {
			String expectedText = param1
			boolean shouldExist = (param2 == null || param2 == true) // ê¸°ë³¸ê°’: true (ì¡´ì¬í•´ì•¼ í•¨)

			// normalize-spaceë¡œ ê³µë°± ë¬¸ì œ í•´ê²°
			TestObject dynamicObject = new TestObject().addProperty(
					"xpath",
					ConditionType.EQUALS,
					"//*[normalize-space(text())='" + expectedText + "']"
					)

			// í…ìŠ¤íŠ¸ê°€ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í™•ì¸
			boolean isVisible = WebUI.verifyElementVisible(dynamicObject, FailureHandling.OPTIONAL)

			if (shouldExist) {
				// í…ìŠ¤íŠ¸ê°€ ìˆì–´ì•¼ ì„±ê³µ
				if (isVisible) {
					printBox(true, "[ " + expectedText + " ] ë¬¸êµ¬ í™•ì¸ ì„±ê³µ", "í…ìŠ¤íŠ¸ í™•ì¸")
				} else {
					printBox(false, "[ " + expectedText + " ] ë¬¸êµ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ", "í…ìŠ¤íŠ¸ í™•ì¸")
				}
			} else {
				// í…ìŠ¤íŠ¸ê°€ ì—†ì–´ì•¼ ì„±ê³µ (ë¯¸ ì¶œë ¥ í™•ì¸)
				if (!isVisible) {
					printBox(true, "[ " + expectedText + " ] ë¬¸êµ¬ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ (ì„±ê³µ)", "ë¯¸ ì¶œë ¥ í™•ì¸")
				} else {
					printBox(false, "[ " + expectedText + " ] ë¬¸êµ¬ê°€ í‘œì‹œë¨ (ì‹¤íŒ¨)", "ë¯¸ ì¶œë ¥ í™•ì¸")
				}
			}

			// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
			// ğŸ”” íŒì—… ìë™ ë‹«ê¸°: ê²€ì¦ ì™„ë£Œ í›„ íŒì—…ì´ ë– ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ë‹«ê¸°
			// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
			closePopupIfExists()

			return
		}
	}















































	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// â–ˆâ–ˆ  íŒì—… ìë™ ë‹«ê¸° (ë‚´ë¶€ í•¨ìˆ˜)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 * ì•Œë¦¼ íŒì—…ì´ í™”ë©´ì— ë– ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ "í™•ì¸" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹«ìŒ
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 *
	 * ğŸ“Œ ë™ì‘ ë°©ì‹:
	 *    1. JSë¡œ í™”ë©´ì— ë³´ì´ëŠ” "í™•ì¸" ë²„íŠ¼ íƒìƒ‰ (Katalon WARN ì—†ìŒ)
	 *    2. í™”ë©´ì— ì•ˆ ë³´ì´ë©´ â†’ ì •ìƒ ì§„í–‰
	 *    3. í™”ë©´ì— ë³´ì´ë©´ â†’ ì„¤ì •ëœ ì‹œê°„ ëŒ€ê¸° í›„ JSë¡œ í´ë¦­
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 */
	private static void closePopupIfExists() {
		try {
			// âœ… JSë¡œ í™”ë©´ì— ë³´ì´ëŠ” "í™•ì¸" ë²„íŠ¼ íƒìƒ‰ (Katalon í‚¤ì›Œë“œ ë¯¸ì‚¬ìš© â†’ WARN ì—†ìŒ)
			String detectScript = """
				var xpaths = [
					"//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'modal')]//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'popup')]//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'alert')]//button[normalize-space(text())='í™•ì¸']",
					"//button[contains(@class,'confirm')]",
					"//button[contains(@class,'ok')]"
				];
				for (var i = 0; i < xpaths.length; i++) {
					var node = document.evaluate(xpaths[i], document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
					if (node) {
						var rect = node.getBoundingClientRect();
						if (rect.width > 0 && rect.height > 0) return true;
					}
				}
				return false;
			"""

			Object result = WebUI.executeJavaScript(detectScript, null)
			boolean popupVisible = (result == true)

			if (!popupVisible) {
				// âœ… íŒì—… ì—†ìŒ â†’ ì •ìƒ ì§„í–‰
				KeywordUtil.logInfo("ğŸ”” íŒì—… ì—†ìŒ â†’ ì •ìƒ ì§„í–‰")
				return
			}

			// âœ… íŒì—… ìˆìŒ â†’ ëŒ€ê¸° í›„ JSë¡œ í´ë¦­
			KeywordUtil.logInfo("ğŸ”” ì•Œë¦¼ íŒì—… ê°ì§€ â†’ ${POPUP_AUTO_CLOSE_SECONDS}ì´ˆ í›„ ìë™ ë‹«ê¸°")
			WebUI.delay(POPUP_AUTO_CLOSE_SECONDS)

			String clickScript = """
				var xpaths = [
					"//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'modal')]//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'popup')]//button[normalize-space(text())='í™•ì¸']",
					"//div[contains(@class,'alert')]//button[normalize-space(text())='í™•ì¸']",
					"//button[contains(@class,'confirm')]",
					"//button[contains(@class,'ok')]"
				];
				for (var i = 0; i < xpaths.length; i++) {
					var node = document.evaluate(xpaths[i], document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
					if (node) {
						var rect = node.getBoundingClientRect();
						if (rect.width > 0 && rect.height > 0) { node.click(); return true; }
					}
				}
				return false;
			"""

			Object clickResult = WebUI.executeJavaScript(clickScript, null)
			if (clickResult == true) {
				KeywordUtil.logInfo("ğŸ”” ì•Œë¦¼ íŒì—… ìë™ ë‹«ê¸° ì™„ë£Œ")
			} else {
				KeywordUtil.logInfo("ğŸ”” íŒì—…ì´ ì´ë¯¸ ìë™ìœ¼ë¡œ ë‹«í˜")
			}
		} catch (Exception e) {
			// íŒì—…ì´ ì—†ê±°ë‚˜ ì´ë¯¸ ë‹«íŒ ê²½ìš° â†’ ë¬´ì‹œ
			KeywordUtil.logInfo("ğŸ”” íŒì—… ìë™ ë‹«ê¸° ì¤‘ ì˜ˆì™¸ (ë¬´ì‹œ): ${e.getMessage()}")
		}
	}

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// â–ˆâ–ˆ  ì‹¤íŒ¨ ì‹œ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ (ë‚´ë¶€ í•¨ìˆ˜)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * ì‹¤íŒ¨ ì‹œ í˜„ì¬ í™”ë©´ì„ ìº¡ì²˜í•˜ì—¬ Katalon ë¦¬í¬íŠ¸ í´ë”ì— ì €ì¥
	 * @param type  ê²€ì¦ íƒ€ì… (íŒŒì¼ëª…ì— í¬í•¨)
	 * @return ì €ì¥ëœ ìŠ¤í¬ë¦°ìƒ· íŒŒì¼ ê²½ë¡œ
	 */
	private static String captureFailureScreen(String type) {
		try {
			// íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ê³ ìœ  íŒŒì¼ëª… ìƒì„±
			String timestamp = new Date().format("yyyyMMdd_HHmmss")
			String safeName = type.replaceAll("[^a-zA-Z0-9ê°€-í£]", "_")
			String fileName = "FAIL_${safeName}_${timestamp}.png"

			// Katalon ë¦¬í¬íŠ¸ í´ë”ì— ì €ì¥ (ê²°ê³¼ì„œì— ìë™ í¬í•¨ë¨)
			String reportDir = RunConfiguration.getReportFolder()
			String filePath = reportDir + File.separator + fileName

			// ìŠ¤í¬ë¦°ìƒ· ì´¬ì˜
			WebUI.takeScreenshot(filePath)

			KeywordUtil.logInfo("ğŸ“¸ ì‹¤íŒ¨ ìŠ¤í¬ë¦°ìƒ· ì €ì¥: ${filePath}")
			return filePath
		} catch (Exception e) {
			KeywordUtil.logInfo("âš ï¸ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ì‹¤íŒ¨: ${e.getMessage()}")
			return ""
		}
	}

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// â–ˆâ–ˆ  ë¦¬í¬íŠ¸ ë°•ìŠ¤ ì¶œë ¥ (ë‚´ë¶€ í•¨ìˆ˜)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 * í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì‹œê°ì  ë°•ìŠ¤ í˜•íƒœë¡œ ì¶œë ¥
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 *
	 * @param isSuccess  ì„±ê³µ ì—¬ë¶€ (true: ì„±ê³µ, false: ì‹¤íŒ¨)
	 * @param msg        ì¶œë ¥í•  ë©”ì‹œì§€
	 * @param type       ê²€ì¦ íƒ€ì… (ì˜ˆ: "í…ìŠ¤íŠ¸ í™•ì¸", "ì´ˆê¸°í™”", "ë²„íŠ¼ í´ë¦­" ë“±)
	 *
	 * ğŸ“Œ ì¶œë ¥ í˜•íƒœ:
	 *    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
	 *    â•‘  âœ…  [PASS]  í…ŒìŠ¤íŠ¸ ì„±ê³µ                                 â•‘
	 *    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
	 *    â•‘  ğŸ”  íƒ€ì… : í…ìŠ¤íŠ¸ í™•ì¸                                  â•‘
	 *    â•‘  ğŸ“  ê²°ê³¼ : [ ë¡œê·¸ì¸ ì„±ê³µ ] ë¬¸êµ¬ í™•ì¸ ì„±ê³µ              â•‘
	 *    â•‘  ğŸŒ  URL  : http://10.20.130.97:8080/main               â•‘
	 *    â•‘  ğŸ“¸  ìº¡ì²˜ : FAIL_í…ìŠ¤íŠ¸_í™•ì¸_20260211_143022.png        â•‘
	 *    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
	 */
	private static void printBox(boolean isSuccess, String msg, String type = "") {
		// í˜„ì¬ í˜ì´ì§€ ì •ë³´ ìë™ ìˆ˜ì§‘
		String currentUrl = ""
		try {
			currentUrl = WebUI.getUrl()
		} catch (Exception e) {
			currentUrl = "(URL ìˆ˜ì§‘ ì‹¤íŒ¨)"
		}

		// â˜… ì‹¤íŒ¨ ì‹œ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
		String screenshotPath = ""
		if (!isSuccess) {
			screenshotPath = captureFailureScreen(type)
		}

		StringBuilder s = new StringBuilder()

		// ìƒë‹¨ í…Œë‘ë¦¬
		s.append("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n")

		// ì„±ê³µ/ì‹¤íŒ¨ í‘œì‹œ
		s.append(isSuccess
				? "â•‘  âœ…  [PASS]  í…ŒìŠ¤íŠ¸ ì„±ê³µ                                 â•‘\n"
				: "â•‘  âŒ  [FAIL]  í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨                                 â•‘\n")

		// êµ¬ë¶„ì„ 
		s.append("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\n")

		// ê²€ì¦ íƒ€ì… í‘œì‹œ (ê°’ì´ ìˆì„ ê²½ìš°ì—ë§Œ)
		if (type) {
			s.append(String.format("â•‘  ğŸ”  íƒ€ì…   : %-42s â•‘\n", type))
		}

		// ê²°ê³¼ ë©”ì‹œì§€
		s.append(String.format("â•‘  ğŸ“  ê²°ê³¼   : %-42s â•‘\n", msg))

		// í˜„ì¬ URL
		s.append(String.format("â•‘  ğŸŒ  URL    : %-42s â•‘\n", currentUrl))

		// ìŠ¤í¬ë¦°ìƒ· ê²½ë¡œ í‘œì‹œ (ì‹¤íŒ¨ ì‹œì—ë§Œ)
		if (screenshotPath) {
			s.append(String.format("â•‘  ğŸ“¸  ìº¡ì²˜   : %-42s â•‘\n", new File(screenshotPath).name))
		}

		// í•˜ë‹¨ í…Œë‘ë¦¬
		s.append("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n")

		// Katalon ë¡œê·¸ì— ê²°ê³¼ ê¸°ë¡
		if (isSuccess) {
			KeywordUtil.markPassed(s.toString())
		} else {
			KeywordUtil.logInfo(s.toString())
			try {
				KeywordUtil.markFailed("âŒ ê²€ì¦ ì‹¤íŒ¨ (ìƒì„¸ ë‚´ìš©ì€ ìœ„ ë¦¬í¬íŠ¸ ë°•ìŠ¤ ì°¸ê³ )")
			} catch (Exception e) {
				// ì˜ˆì™¸ ë¬´ì‹œ (ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ì¶œë ¥ ë°©ì§€)
			}
		}
	}
}